\hypertarget{namespaceSensorIMU}{}\doxysection{Sensor\+I\+MU Namespace Reference}
\label{namespaceSensorIMU}\index{SensorIMU@{SensorIMU}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classSensorIMU_1_1ROSIMU}{R\+O\+S\+I\+MU}}
\begin{DoxyCompactList}\small\item\em Extends \mbox{\hyperlink{classSensorIMU_1_1SensorIMU}{Sensor\+I\+MU}} to publish data as a R\+OS node. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classSensorIMU_1_1SensorIMU}{Sensor\+I\+MU}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespaceSensorIMU_a6183b46a5e8a468bfea15d53920f42e9}{set\+\_\+imu\+\_\+configuration}} (self)
\begin{DoxyCompactList}\small\item\em Configures the I\+MU with the necessary settings and modes. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespaceSensorIMU_ac646165254a4488e080794bdfe6a97be}{callback\+\_\+calibration\+\_\+imu\+\_\+status}} (self, req)
\begin{DoxyCompactList}\small\item\em Callback function to check the I\+MU calibration status. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespaceSensorIMU_a8afda9eebe2c2ccf6af1b85a4f02f027}{load\+\_\+calibration\+\_\+from\+\_\+file}} (self)
\begin{DoxyCompactList}\small\item\em Loads I\+MU calibration data from a file. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespaceSensorIMU_a190abb72cde71851da8b653f226aa53e}{should\+\_\+update\+\_\+imu}} (self)
\begin{DoxyCompactList}\small\item\em Determines if the I\+MU data needs to be updated based on a fixed update frequency. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespaceSensorIMU_a307dbf14302c485743b61573e5a60987}{update\+\_\+angles}} (self)
\begin{DoxyCompactList}\small\item\em Updates the yaw, pitch, and roll angles of the I\+MU sensor. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespaceSensorIMU_a1d9a641ac9a33e4f470bef07ccbb7838}{update\+\_\+imu}} (self)
\begin{DoxyCompactList}\small\item\em Fetches updated I\+MU data from the sensor. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespaceSensorIMU_a68d1aa2218826b73a9bc8a069306ecda}{convert\+\_\+angle}} (self, angle)
\begin{DoxyCompactList}\small\item\em Converts an angle to a value within 0 to 360 degrees. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespaceSensorIMU_a6734f909b586db86c1b2c7c04ba3ddb3}{calculate\+\_\+yaw\+\_\+pitch\+\_\+roll}} (self, quaternion)
\begin{DoxyCompactList}\small\item\em Calculates yaw, pitch, and roll from quaternion data. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespaceSensorIMU_a8a55cf37a92cae87cfc81035d5457217}{get\+\_\+imu\+\_\+message}} (self)
\begin{DoxyCompactList}\small\item\em Generates the R\+OS I\+MU message with the updated sensor data. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespaceSensorIMU_aca91a368da1c02a2cadc7a319d27e0b3}{get\+\_\+yaw}} (self)
\begin{DoxyCompactList}\small\item\em Fetches the current relative yaw value. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespaceSensorIMU_ad2d76801911d3819023dd447ae74edb2}{get\+\_\+pitch}} (self)
\begin{DoxyCompactList}\small\item\em Fetches the current relative pitch value. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespaceSensorIMU_ad86c8e5eb2b6641a5f21eebe7e65f032}{get\+\_\+roll}} (self)
\begin{DoxyCompactList}\small\item\em Fetches the current relative roll value. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespaceSensorIMU_a6734f909b586db86c1b2c7c04ba3ddb3}\label{namespaceSensorIMU_a6734f909b586db86c1b2c7c04ba3ddb3}} 
\index{SensorIMU@{SensorIMU}!calculate\_yaw\_pitch\_roll@{calculate\_yaw\_pitch\_roll}}
\index{calculate\_yaw\_pitch\_roll@{calculate\_yaw\_pitch\_roll}!SensorIMU@{SensorIMU}}
\doxysubsubsection{\texorpdfstring{calculate\_yaw\_pitch\_roll()}{calculate\_yaw\_pitch\_roll()}}
{\footnotesize\ttfamily def Sensor\+I\+M\+U.\+calculate\+\_\+yaw\+\_\+pitch\+\_\+roll (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{quaternion }\end{DoxyParamCaption})}



Calculates yaw, pitch, and roll from quaternion data. 


\begin{DoxyParams}{Parameters}
{\em quaternion} & Quaternion tuple (x, y, z, w) \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em tuple} & (yaw, pitch, roll) in radians \\
\hline
\end{DoxyRetVals}


Definition at line 214 of file Sensor\+I\+M\+U.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{214     \textcolor{keyword}{def }\mbox{\hyperlink{namespaceSensorIMU_a6734f909b586db86c1b2c7c04ba3ddb3}{calculate\_yaw\_pitch\_roll}}(self, quaternion):}
\DoxyCodeLine{215         z, y, x, w = quaternion}
\DoxyCodeLine{216         norm = math.sqrt(x * x + y * y + z * z + w * w)}
\DoxyCodeLine{217         \textcolor{keywordflow}{if} norm > 0:}
\DoxyCodeLine{218             x /= norm}
\DoxyCodeLine{219             y /= norm}
\DoxyCodeLine{220             z /= norm}
\DoxyCodeLine{221             w /= norm}
\DoxyCodeLine{222         yaw = math.atan2(2.0 * (w * z + x * y), 1.0 -\/ 2.0 * (y * y + z * z))}
\DoxyCodeLine{223         pitch = math.asin(max(-\/1.0, min(1.0, 2.0 * (w * y -\/ z * x))))}
\DoxyCodeLine{224         roll = math.atan2(2.0 * (w * x + y * z), 1.0 -\/ 2.0 * (x * x + y * y))}
\DoxyCodeLine{225         \textcolor{keywordflow}{return} yaw, pitch, roll}
\DoxyCodeLine{226 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceSensorIMU_ac646165254a4488e080794bdfe6a97be}\label{namespaceSensorIMU_ac646165254a4488e080794bdfe6a97be}} 
\index{SensorIMU@{SensorIMU}!callback\_calibration\_imu\_status@{callback\_calibration\_imu\_status}}
\index{callback\_calibration\_imu\_status@{callback\_calibration\_imu\_status}!SensorIMU@{SensorIMU}}
\doxysubsubsection{\texorpdfstring{callback\_calibration\_imu\_status()}{callback\_calibration\_imu\_status()}}
{\footnotesize\ttfamily def Sensor\+I\+M\+U.\+callback\+\_\+calibration\+\_\+imu\+\_\+status (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{req }\end{DoxyParamCaption})}



Callback function to check the I\+MU calibration status. 

This function is triggered to fetch the current calibration status of the I\+MU. The status for the system, gyroscope, accelerometer, and magnetometer is returned.


\begin{DoxyParams}{Parameters}
{\em req} & The request triggering the callback. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Trigger\+Response containing calibration status and success flag. 
\end{DoxyReturn}


Definition at line 121 of file Sensor\+I\+M\+U.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{121     \textcolor{keyword}{def }\mbox{\hyperlink{namespaceSensorIMU_ac646165254a4488e080794bdfe6a97be}{callback\_calibration\_imu\_status}}(self, req):}
\DoxyCodeLine{122 }
\DoxyCodeLine{123         self.stop\_request = \textcolor{keyword}{True}}
\DoxyCodeLine{124         time.sleep(1 / self.frequency)}
\DoxyCodeLine{125         calibration\_status, status = self.bno055.get\_calibration\_status()}
\DoxyCodeLine{126         self.stop\_request = \textcolor{keyword}{False}}
\DoxyCodeLine{127 }
\DoxyCodeLine{128         result = TriggerResponse()}
\DoxyCodeLine{129 }
\DoxyCodeLine{130         \textcolor{keywordflow}{if} status == RESPONSE\_OK:}
\DoxyCodeLine{131             sys = \textcolor{stringliteral}{" [System: "} + str(calibration\_status[0]) + \textcolor{stringliteral}{"]"}}
\DoxyCodeLine{132             gyr = \textcolor{stringliteral}{" [Gyroscope: "} + str(calibration\_status[1]) + \textcolor{stringliteral}{"]"}}
\DoxyCodeLine{133             acc = \textcolor{stringliteral}{" [Accelerometer: "} + str(calibration\_status[2]) + \textcolor{stringliteral}{"]"}}
\DoxyCodeLine{134             mag = \textcolor{stringliteral}{" [Magnetometer: "} + str(calibration\_status[3]) + \textcolor{stringliteral}{"]"}}
\DoxyCodeLine{135             result.message = sys + gyr + acc + mag}
\DoxyCodeLine{136             result.success = \textcolor{keyword}{True}}
\DoxyCodeLine{137         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{138             rospy.logwarn(\textcolor{stringliteral}{"Unable to read IMU calibration"})}
\DoxyCodeLine{139             result.message = \textcolor{stringliteral}{"Unable to read IMU calibration"}}
\DoxyCodeLine{140             result.success = \textcolor{keyword}{False}}
\DoxyCodeLine{141 }
\DoxyCodeLine{142         \textcolor{keywordflow}{return} result}
\DoxyCodeLine{143 }
\DoxyCodeLine{144 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceSensorIMU_a68d1aa2218826b73a9bc8a069306ecda}\label{namespaceSensorIMU_a68d1aa2218826b73a9bc8a069306ecda}} 
\index{SensorIMU@{SensorIMU}!convert\_angle@{convert\_angle}}
\index{convert\_angle@{convert\_angle}!SensorIMU@{SensorIMU}}
\doxysubsubsection{\texorpdfstring{convert\_angle()}{convert\_angle()}}
{\footnotesize\ttfamily def Sensor\+I\+M\+U.\+convert\+\_\+angle (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{angle }\end{DoxyParamCaption})}



Converts an angle to a value within 0 to 360 degrees. 


\begin{DoxyParams}{Parameters}
{\em angle} & Input angle in degrees \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em float} & Converted angle within 0 to 360 degrees \\
\hline
\end{DoxyRetVals}


Definition at line 208 of file Sensor\+I\+M\+U.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{208     \textcolor{keyword}{def }\mbox{\hyperlink{namespaceSensorIMU_a68d1aa2218826b73a9bc8a069306ecda}{convert\_angle}}(self, angle):}
\DoxyCodeLine{209         \textcolor{keywordflow}{return} (angle + 360) \% 360}
\DoxyCodeLine{210 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceSensorIMU_a8a55cf37a92cae87cfc81035d5457217}\label{namespaceSensorIMU_a8a55cf37a92cae87cfc81035d5457217}} 
\index{SensorIMU@{SensorIMU}!get\_imu\_message@{get\_imu\_message}}
\index{get\_imu\_message@{get\_imu\_message}!SensorIMU@{SensorIMU}}
\doxysubsubsection{\texorpdfstring{get\_imu\_message()}{get\_imu\_message()}}
{\footnotesize\ttfamily def Sensor\+I\+M\+U.\+get\+\_\+imu\+\_\+message (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Generates the R\+OS I\+MU message with the updated sensor data. 


\begin{DoxyRetVals}{Return values}
{\em Imu} & Updated I\+MU message ready for publishing \\
\hline
\end{DoxyRetVals}


Definition at line 229 of file Sensor\+I\+M\+U.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{229     \textcolor{keyword}{def }\mbox{\hyperlink{namespaceSensorIMU_a8a55cf37a92cae87cfc81035d5457217}{get\_imu\_message}}(self):}
\DoxyCodeLine{230         \textcolor{keywordflow}{if} self.should\_update\_imu():}
\DoxyCodeLine{231             self.update\_imu()}
\DoxyCodeLine{232 }
\DoxyCodeLine{233         quaternion = self.imu.get\_quaternion\_orientation()}
\DoxyCodeLine{234         linear\_acceleration = self.imu.get\_linear\_acceleration()}
\DoxyCodeLine{235         gyroscope = self.imu.get\_gyroscope()}
\DoxyCodeLine{236 }
\DoxyCodeLine{237         \textcolor{comment}{\# Reuse the imu\_msg attribute}}
\DoxyCodeLine{238         self.imu\_msg.header.frame\_id = self.frame\_id}
\DoxyCodeLine{239         \textcolor{comment}{\# self.imu\_msg.header.stamp = rospy.get\_time()}}
\DoxyCodeLine{240         }
\DoxyCodeLine{241         self.imu\_msg.orientation.x, self.imu\_msg.orientation.y, self.imu\_msg.orientation.z, self.imu\_msg.orientation.w = quaternion}
\DoxyCodeLine{242         self.imu\_msg.linear\_acceleration.x, self.imu\_msg.linear\_acceleration.y, self.imu\_msg.linear\_acceleration.z = linear\_acceleration}
\DoxyCodeLine{243         self.imu\_msg.angular\_velocity.x, self.imu\_msg.angular\_velocity.y, self.imu\_msg.angular\_velocity.z = gyroscope}
\DoxyCodeLine{244 }
\DoxyCodeLine{245         \textcolor{comment}{\# Set covariance values to -\/1}}
\DoxyCodeLine{246         self.imu\_msg.orientation\_covariance[0] = -\/1}
\DoxyCodeLine{247         self.imu\_msg.linear\_acceleration\_covariance[0] = -\/1}
\DoxyCodeLine{248         self.imu\_msg.angular\_velocity\_covariance[0] = -\/1}
\DoxyCodeLine{249         }
\DoxyCodeLine{250         \textcolor{keywordflow}{return} self.imu\_msg}
\DoxyCodeLine{251 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceSensorIMU_ad2d76801911d3819023dd447ae74edb2}\label{namespaceSensorIMU_ad2d76801911d3819023dd447ae74edb2}} 
\index{SensorIMU@{SensorIMU}!get\_pitch@{get\_pitch}}
\index{get\_pitch@{get\_pitch}!SensorIMU@{SensorIMU}}
\doxysubsubsection{\texorpdfstring{get\_pitch()}{get\_pitch()}}
{\footnotesize\ttfamily def Sensor\+I\+M\+U.\+get\+\_\+pitch (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Fetches the current relative pitch value. 


\begin{DoxyRetVals}{Return values}
{\em tuple} & Relative pitch in radians and degrees \\
\hline
\end{DoxyRetVals}


Definition at line 260 of file Sensor\+I\+M\+U.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{260     \textcolor{keyword}{def }\mbox{\hyperlink{namespaceSensorIMU_ad2d76801911d3819023dd447ae74edb2}{get\_pitch}}(self):}
\DoxyCodeLine{261         \textcolor{keywordflow}{if} self.should\_update\_imu():}
\DoxyCodeLine{262             self.update\_imu()}
\DoxyCodeLine{263         \textcolor{keywordflow}{return} self.relative\_pitch, self.convert\_angle(math.degrees(self.relative\_pitch))}

\end{DoxyCode}
\mbox{\Hypertarget{namespaceSensorIMU_ad86c8e5eb2b6641a5f21eebe7e65f032}\label{namespaceSensorIMU_ad86c8e5eb2b6641a5f21eebe7e65f032}} 
\index{SensorIMU@{SensorIMU}!get\_roll@{get\_roll}}
\index{get\_roll@{get\_roll}!SensorIMU@{SensorIMU}}
\doxysubsubsection{\texorpdfstring{get\_roll()}{get\_roll()}}
{\footnotesize\ttfamily def Sensor\+I\+M\+U.\+get\+\_\+roll (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Fetches the current relative roll value. 


\begin{DoxyRetVals}{Return values}
{\em tuple} & Relative roll in radians and degrees \\
\hline
\end{DoxyRetVals}


Definition at line 266 of file Sensor\+I\+M\+U.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{266     \textcolor{keyword}{def }\mbox{\hyperlink{namespaceSensorIMU_ad86c8e5eb2b6641a5f21eebe7e65f032}{get\_roll}}(self):}
\DoxyCodeLine{267         \textcolor{keywordflow}{if} self.should\_update\_imu():}
\DoxyCodeLine{268             self.update\_imu()}
\DoxyCodeLine{269         \textcolor{keywordflow}{return} self.relative\_roll, self.convert\_angle(math.degrees(self.relative\_roll))}
\DoxyCodeLine{270 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceSensorIMU_aca91a368da1c02a2cadc7a319d27e0b3}\label{namespaceSensorIMU_aca91a368da1c02a2cadc7a319d27e0b3}} 
\index{SensorIMU@{SensorIMU}!get\_yaw@{get\_yaw}}
\index{get\_yaw@{get\_yaw}!SensorIMU@{SensorIMU}}
\doxysubsubsection{\texorpdfstring{get\_yaw()}{get\_yaw()}}
{\footnotesize\ttfamily def Sensor\+I\+M\+U.\+get\+\_\+yaw (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Fetches the current relative yaw value. 


\begin{DoxyRetVals}{Return values}
{\em tuple} & Relative yaw in radians and degrees \\
\hline
\end{DoxyRetVals}


Definition at line 254 of file Sensor\+I\+M\+U.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{254     \textcolor{keyword}{def }\mbox{\hyperlink{namespaceSensorIMU_aca91a368da1c02a2cadc7a319d27e0b3}{get\_yaw}}(self):}
\DoxyCodeLine{255         \textcolor{keywordflow}{if} self.should\_update\_imu():}
\DoxyCodeLine{256             self.update\_imu()}
\DoxyCodeLine{257         \textcolor{keywordflow}{return} self.relative\_yaw, self.convert\_angle(math.degrees(self.relative\_yaw))}

\end{DoxyCode}
\mbox{\Hypertarget{namespaceSensorIMU_a8afda9eebe2c2ccf6af1b85a4f02f027}\label{namespaceSensorIMU_a8afda9eebe2c2ccf6af1b85a4f02f027}} 
\index{SensorIMU@{SensorIMU}!load\_calibration\_from\_file@{load\_calibration\_from\_file}}
\index{load\_calibration\_from\_file@{load\_calibration\_from\_file}!SensorIMU@{SensorIMU}}
\doxysubsubsection{\texorpdfstring{load\_calibration\_from\_file()}{load\_calibration\_from\_file()}}
{\footnotesize\ttfamily def Sensor\+I\+M\+U.\+load\+\_\+calibration\+\_\+from\+\_\+file (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Loads I\+MU calibration data from a file. 

Attempts to load calibration data from a binary file, and if successful, loads the data into the I\+MU. If the file is not found or data loading fails, the I\+MU will use the default calibration.

\begin{DoxyReturn}{Returns}
int Status code indicating success or failure of loading calibration. 
\end{DoxyReturn}


Definition at line 154 of file Sensor\+I\+M\+U.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{154     \textcolor{keyword}{def }\mbox{\hyperlink{namespaceSensorIMU_a8afda9eebe2c2ccf6af1b85a4f02f027}{load\_calibration\_from\_file}}(self):}
\DoxyCodeLine{155 }
\DoxyCodeLine{156         status = -\/1}
\DoxyCodeLine{157         dir\_path = os.path.dirname(os.path.realpath(\_\_file\_\_))}
\DoxyCodeLine{158 }
\DoxyCodeLine{159         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{160             binary\_file = open(str(dir\_path) + \textcolor{stringliteral}{"/"} + self.operation\_mode\_str + \textcolor{stringliteral}{"\_calibration"}, \textcolor{stringliteral}{"rb"})}
\DoxyCodeLine{161             calibration\_data = binary\_file.read()}
\DoxyCodeLine{162             binary\_file.close()}
\DoxyCodeLine{163             calibration\_exists = \textcolor{keyword}{True}}
\DoxyCodeLine{164         \textcolor{keywordflow}{except}:}
\DoxyCodeLine{165             calibration\_data = 0}
\DoxyCodeLine{166             calibration\_exists = \textcolor{keyword}{False}}
\DoxyCodeLine{167 }
\DoxyCodeLine{168         \textcolor{keywordflow}{if} calibration\_exists:}
\DoxyCodeLine{169             status = self.bno055.set\_calibration(calibration\_data)}
\DoxyCodeLine{170         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{171             status = RESPONSE\_ERROR}
\DoxyCodeLine{172 }
\DoxyCodeLine{173         \textcolor{keywordflow}{return} status}
\DoxyCodeLine{174 }
\DoxyCodeLine{175 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceSensorIMU_a6183b46a5e8a468bfea15d53920f42e9}\label{namespaceSensorIMU_a6183b46a5e8a468bfea15d53920f42e9}} 
\index{SensorIMU@{SensorIMU}!set\_imu\_configuration@{set\_imu\_configuration}}
\index{set\_imu\_configuration@{set\_imu\_configuration}!SensorIMU@{SensorIMU}}
\doxysubsubsection{\texorpdfstring{set\_imu\_configuration()}{set\_imu\_configuration()}}
{\footnotesize\ttfamily def Sensor\+I\+M\+U.\+set\+\_\+imu\+\_\+configuration (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Configures the I\+MU with the necessary settings and modes. 

This method performs the following steps\+:
\begin{DoxyItemize}
\item Enables I\+MU configuration mode.
\item Sets I\+MU units such as acceleration, angular velocity, orientation, and temperature.
\item Sets the I\+MU axis configuration.
\item Loads calibration data from a file if available.
\item Configures the I\+MU oscillator type.
\item Sets the I\+MU to operation mode to begin normal functionality.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}


Definition at line 68 of file Sensor\+I\+M\+U.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{68     \textcolor{keyword}{def }\mbox{\hyperlink{namespaceSensorIMU_a6183b46a5e8a468bfea15d53920f42e9}{set\_imu\_configuration}}(self):}
\DoxyCodeLine{69         status\_1 = self.bno055.enable\_imu\_configuration()}
\DoxyCodeLine{70 }
\DoxyCodeLine{71         \textcolor{keywordflow}{if} status\_1 != RESPONSE\_OK:}
\DoxyCodeLine{72             rospy.logerr(\textcolor{stringliteral}{"Unable to activate configuration mode"})}
\DoxyCodeLine{73 }
\DoxyCodeLine{74         status\_2 = self.bno055.set\_imu\_units(}
\DoxyCodeLine{75             acceleration\_units=METERS\_PER\_SECOND,}
\DoxyCodeLine{76             angular\_velocity\_units=RAD\_PER\_SECOND,}
\DoxyCodeLine{77             euler\_orientation\_units=RAD,}
\DoxyCodeLine{78             temperature\_units=CELSIUS,}
\DoxyCodeLine{79             orientation\_mode=WINDOWS\_ORIENTATION}
\DoxyCodeLine{80         )}
\DoxyCodeLine{81 }
\DoxyCodeLine{82         \textcolor{keywordflow}{if} status\_2 != RESPONSE\_OK:}
\DoxyCodeLine{83             rospy.logwarn(\textcolor{stringliteral}{"Unable to configure units"})}
\DoxyCodeLine{84 }
\DoxyCodeLine{85         status\_3 = self.bno055.set\_imu\_axis(axis\_placement=P1)}
\DoxyCodeLine{86 }
\DoxyCodeLine{87         \textcolor{keywordflow}{if} status\_3 != RESPONSE\_OK:}
\DoxyCodeLine{88             rospy.logwarn(\textcolor{stringliteral}{"Unable to configure axis"})}
\DoxyCodeLine{89 }
\DoxyCodeLine{90         status\_calibration = self.load\_calibration\_from\_file()}
\DoxyCodeLine{91 }
\DoxyCodeLine{92         \textcolor{keywordflow}{if} status\_calibration != RESPONSE\_OK:}
\DoxyCodeLine{93             rospy.loginfo(\textcolor{stringliteral}{"Calibration not detected. IMU will use default calibration"})}
\DoxyCodeLine{94 }
\DoxyCodeLine{95         status\_oscillator = self.bno055.set\_oscillator(oscillator\_type=self.oscillator)}
\DoxyCodeLine{96 }
\DoxyCodeLine{97         \textcolor{keywordflow}{if} status\_oscillator != RESPONSE\_OK:}
\DoxyCodeLine{98             rospy.loginfo(\textcolor{stringliteral}{"Unable to configure oscillator"})}
\DoxyCodeLine{99 }
\DoxyCodeLine{100         status\_4 = self.bno055.set\_imu\_operation\_mode(operation\_mode=self.operation\_mode)}
\DoxyCodeLine{101 }
\DoxyCodeLine{102         \textcolor{keywordflow}{if} status\_4 != RESPONSE\_OK:}
\DoxyCodeLine{103             rospy.logerr(\textcolor{stringliteral}{"Unable to configure operation mode"})}
\DoxyCodeLine{104 }
\DoxyCodeLine{105         \textcolor{keywordflow}{if} (status\_1 == RESPONSE\_OK \textcolor{keywordflow}{and} status\_2 == RESPONSE\_OK }
\DoxyCodeLine{106             \textcolor{keywordflow}{and} status\_3 == RESPONSE\_OK \textcolor{keywordflow}{and} status\_4 == RESPONSE\_OK):}
\DoxyCodeLine{107             rospy.loginfo(\textcolor{stringliteral}{"IMU is working now in \%s mode!"}, self.operation\_mode\_str)}
\DoxyCodeLine{108         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{109             rospy.logwarn(\textcolor{stringliteral}{"The IMU was not configured correctly. It may not work"})}
\DoxyCodeLine{110 }
\DoxyCodeLine{111 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceSensorIMU_a190abb72cde71851da8b653f226aa53e}\label{namespaceSensorIMU_a190abb72cde71851da8b653f226aa53e}} 
\index{SensorIMU@{SensorIMU}!should\_update\_imu@{should\_update\_imu}}
\index{should\_update\_imu@{should\_update\_imu}!SensorIMU@{SensorIMU}}
\doxysubsubsection{\texorpdfstring{should\_update\_imu()}{should\_update\_imu()}}
{\footnotesize\ttfamily def Sensor\+I\+M\+U.\+should\+\_\+update\+\_\+imu (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Determines if the I\+MU data needs to be updated based on a fixed update frequency. 


\begin{DoxyRetVals}{Return values}
{\em bool} & True if the I\+MU should update, False otherwise \\
\hline
\end{DoxyRetVals}


Definition at line 178 of file Sensor\+I\+M\+U.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{178     \textcolor{keyword}{def }\mbox{\hyperlink{namespaceSensorIMU_a190abb72cde71851da8b653f226aa53e}{should\_update\_imu}}(self):}
\DoxyCodeLine{179         current\_time = time.time()}
\DoxyCodeLine{180         \textcolor{keywordflow}{if} current\_time -\/ self.last\_update\_time >= 0.025:}
\DoxyCodeLine{181             self.last\_update\_time = current\_time}
\DoxyCodeLine{182             \textcolor{keywordflow}{return} \textcolor{keyword}{True}}
\DoxyCodeLine{183         \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{184 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceSensorIMU_a307dbf14302c485743b61573e5a60987}\label{namespaceSensorIMU_a307dbf14302c485743b61573e5a60987}} 
\index{SensorIMU@{SensorIMU}!update\_angles@{update\_angles}}
\index{update\_angles@{update\_angles}!SensorIMU@{SensorIMU}}
\doxysubsubsection{\texorpdfstring{update\_angles()}{update\_angles()}}
{\footnotesize\ttfamily def Sensor\+I\+M\+U.\+update\+\_\+angles (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Updates the yaw, pitch, and roll angles of the I\+MU sensor. 



Definition at line 186 of file Sensor\+I\+M\+U.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{186     \textcolor{keyword}{def }\mbox{\hyperlink{namespaceSensorIMU_a307dbf14302c485743b61573e5a60987}{update\_angles}}(self):}
\DoxyCodeLine{187         quaternion = self.imu.get\_quaternion\_orientation()}
\DoxyCodeLine{188         current\_yaw, current\_pitch, current\_roll = self.calculate\_yaw\_pitch\_roll(quaternion)}
\DoxyCodeLine{189 }
\DoxyCodeLine{190         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.initialized:}
\DoxyCodeLine{191             self.initial\_yaw = current\_yaw}
\DoxyCodeLine{192             self.initial\_pitch = current\_pitch}
\DoxyCodeLine{193             self.initial\_roll = current\_roll}
\DoxyCodeLine{194             self.initialized = \textcolor{keyword}{True}}
\DoxyCodeLine{195 }
\DoxyCodeLine{196         self.relative\_yaw = current\_yaw -\/ self.initial\_yaw}
\DoxyCodeLine{197         self.relative\_pitch = current\_pitch -\/ self.initial\_pitch}
\DoxyCodeLine{198         self.relative\_roll = current\_roll -\/ self.initial\_roll}
\DoxyCodeLine{199 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceSensorIMU_a1d9a641ac9a33e4f470bef07ccbb7838}\label{namespaceSensorIMU_a1d9a641ac9a33e4f470bef07ccbb7838}} 
\index{SensorIMU@{SensorIMU}!update\_imu@{update\_imu}}
\index{update\_imu@{update\_imu}!SensorIMU@{SensorIMU}}
\doxysubsubsection{\texorpdfstring{update\_imu()}{update\_imu()}}
{\footnotesize\ttfamily def Sensor\+I\+M\+U.\+update\+\_\+imu (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Fetches updated I\+MU data from the sensor. 



Definition at line 201 of file Sensor\+I\+M\+U.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{201     \textcolor{keyword}{def }\mbox{\hyperlink{namespaceSensorIMU_a1d9a641ac9a33e4f470bef07ccbb7838}{update\_imu}}(self):}
\DoxyCodeLine{202         self.imu.update\_imu\_data()}
\DoxyCodeLine{203         self.update\_angles()}
\DoxyCodeLine{204 }

\end{DoxyCode}
