<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IMU Driver: SensorIMU Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">IMU Driver
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SensorIMU Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorIMU_1_1ROSIMU.html">ROSIMU</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extends <a class="el" href="classSensorIMU_1_1SensorIMU.html">SensorIMU</a> to publish data as a ROS node.  <a href="classSensorIMU_1_1ROSIMU.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorIMU_1_1SensorIMU.html">SensorIMU</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6183b46a5e8a468bfea15d53920f42e9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSensorIMU.html#a6183b46a5e8a468bfea15d53920f42e9">set_imu_configuration</a> (self)</td></tr>
<tr class="memdesc:a6183b46a5e8a468bfea15d53920f42e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the IMU with the necessary settings and modes.  <a href="namespaceSensorIMU.html#a6183b46a5e8a468bfea15d53920f42e9">More...</a><br /></td></tr>
<tr class="separator:a6183b46a5e8a468bfea15d53920f42e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac646165254a4488e080794bdfe6a97be"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSensorIMU.html#ac646165254a4488e080794bdfe6a97be">callback_calibration_imu_status</a> (self, req)</td></tr>
<tr class="memdesc:ac646165254a4488e080794bdfe6a97be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function to check the IMU calibration status.  <a href="namespaceSensorIMU.html#ac646165254a4488e080794bdfe6a97be">More...</a><br /></td></tr>
<tr class="separator:ac646165254a4488e080794bdfe6a97be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8afda9eebe2c2ccf6af1b85a4f02f027"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSensorIMU.html#a8afda9eebe2c2ccf6af1b85a4f02f027">load_calibration_from_file</a> (self)</td></tr>
<tr class="memdesc:a8afda9eebe2c2ccf6af1b85a4f02f027"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads IMU calibration data from a file.  <a href="namespaceSensorIMU.html#a8afda9eebe2c2ccf6af1b85a4f02f027">More...</a><br /></td></tr>
<tr class="separator:a8afda9eebe2c2ccf6af1b85a4f02f027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a190abb72cde71851da8b653f226aa53e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSensorIMU.html#a190abb72cde71851da8b653f226aa53e">should_update_imu</a> (self)</td></tr>
<tr class="memdesc:a190abb72cde71851da8b653f226aa53e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if the IMU data needs to be updated based on a fixed update frequency.  <a href="namespaceSensorIMU.html#a190abb72cde71851da8b653f226aa53e">More...</a><br /></td></tr>
<tr class="separator:a190abb72cde71851da8b653f226aa53e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a307dbf14302c485743b61573e5a60987"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSensorIMU.html#a307dbf14302c485743b61573e5a60987">update_angles</a> (self)</td></tr>
<tr class="memdesc:a307dbf14302c485743b61573e5a60987"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the yaw, pitch, and roll angles of the IMU sensor.  <a href="namespaceSensorIMU.html#a307dbf14302c485743b61573e5a60987">More...</a><br /></td></tr>
<tr class="separator:a307dbf14302c485743b61573e5a60987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d9a641ac9a33e4f470bef07ccbb7838"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSensorIMU.html#a1d9a641ac9a33e4f470bef07ccbb7838">update_imu</a> (self)</td></tr>
<tr class="memdesc:a1d9a641ac9a33e4f470bef07ccbb7838"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches updated IMU data from the sensor.  <a href="namespaceSensorIMU.html#a1d9a641ac9a33e4f470bef07ccbb7838">More...</a><br /></td></tr>
<tr class="separator:a1d9a641ac9a33e4f470bef07ccbb7838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68d1aa2218826b73a9bc8a069306ecda"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSensorIMU.html#a68d1aa2218826b73a9bc8a069306ecda">convert_angle</a> (self, angle)</td></tr>
<tr class="memdesc:a68d1aa2218826b73a9bc8a069306ecda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an angle to a value within 0 to 360 degrees.  <a href="namespaceSensorIMU.html#a68d1aa2218826b73a9bc8a069306ecda">More...</a><br /></td></tr>
<tr class="separator:a68d1aa2218826b73a9bc8a069306ecda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6734f909b586db86c1b2c7c04ba3ddb3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSensorIMU.html#a6734f909b586db86c1b2c7c04ba3ddb3">calculate_yaw_pitch_roll</a> (self, quaternion)</td></tr>
<tr class="memdesc:a6734f909b586db86c1b2c7c04ba3ddb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates yaw, pitch, and roll from quaternion data.  <a href="namespaceSensorIMU.html#a6734f909b586db86c1b2c7c04ba3ddb3">More...</a><br /></td></tr>
<tr class="separator:a6734f909b586db86c1b2c7c04ba3ddb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a55cf37a92cae87cfc81035d5457217"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSensorIMU.html#a8a55cf37a92cae87cfc81035d5457217">get_imu_message</a> (self)</td></tr>
<tr class="memdesc:a8a55cf37a92cae87cfc81035d5457217"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates the ROS IMU message with the updated sensor data.  <a href="namespaceSensorIMU.html#a8a55cf37a92cae87cfc81035d5457217">More...</a><br /></td></tr>
<tr class="separator:a8a55cf37a92cae87cfc81035d5457217"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca91a368da1c02a2cadc7a319d27e0b3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSensorIMU.html#aca91a368da1c02a2cadc7a319d27e0b3">get_yaw</a> (self)</td></tr>
<tr class="memdesc:aca91a368da1c02a2cadc7a319d27e0b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the current relative yaw value.  <a href="namespaceSensorIMU.html#aca91a368da1c02a2cadc7a319d27e0b3">More...</a><br /></td></tr>
<tr class="separator:aca91a368da1c02a2cadc7a319d27e0b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2d76801911d3819023dd447ae74edb2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSensorIMU.html#ad2d76801911d3819023dd447ae74edb2">get_pitch</a> (self)</td></tr>
<tr class="memdesc:ad2d76801911d3819023dd447ae74edb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the current relative pitch value.  <a href="namespaceSensorIMU.html#ad2d76801911d3819023dd447ae74edb2">More...</a><br /></td></tr>
<tr class="separator:ad2d76801911d3819023dd447ae74edb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad86c8e5eb2b6641a5f21eebe7e65f032"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSensorIMU.html#ad86c8e5eb2b6641a5f21eebe7e65f032">get_roll</a> (self)</td></tr>
<tr class="memdesc:ad86c8e5eb2b6641a5f21eebe7e65f032"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the current relative roll value.  <a href="namespaceSensorIMU.html#ad86c8e5eb2b6641a5f21eebe7e65f032">More...</a><br /></td></tr>
<tr class="separator:ad86c8e5eb2b6641a5f21eebe7e65f032"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a6734f909b586db86c1b2c7c04ba3ddb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6734f909b586db86c1b2c7c04ba3ddb3">&#9670;&nbsp;</a></span>calculate_yaw_pitch_roll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def SensorIMU.calculate_yaw_pitch_roll </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>quaternion</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates yaw, pitch, and roll from quaternion data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">quaternion</td><td>Quaternion tuple (x, y, z, w) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">tuple</td><td>(yaw, pitch, roll) in radians </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="SensorIMU_8py_source.html#l00214">214</a> of file <a class="el" href="SensorIMU_8py_source.html">SensorIMU.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keyword">def </span><a class="code" href="namespaceSensorIMU.html#a6734f909b586db86c1b2c7c04ba3ddb3">calculate_yaw_pitch_roll</a>(self, quaternion):</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        z, y, x, w = quaternion</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        norm = math.sqrt(x * x + y * y + z * z + w * w)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">if</span> norm &gt; 0:</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            x /= norm</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            y /= norm</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            z /= norm</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            w /= norm</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        yaw = math.atan2(2.0 * (w * z + x * y), 1.0 - 2.0 * (y * y + z * z))</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        pitch = math.asin(max(-1.0, min(1.0, 2.0 * (w * y - z * x))))</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        roll = math.atan2(2.0 * (w * x + y * z), 1.0 - 2.0 * (x * x + y * y))</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">return</span> yaw, pitch, roll</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac646165254a4488e080794bdfe6a97be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac646165254a4488e080794bdfe6a97be">&#9670;&nbsp;</a></span>callback_calibration_imu_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def SensorIMU.callback_calibration_imu_status </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>req</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function to check the IMU calibration status. </p>
<p>This function is triggered to fetch the current calibration status of the IMU. The status for the system, gyroscope, accelerometer, and magnetometer is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>The request triggering the callback. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TriggerResponse containing calibration status and success flag. </dd></dl>

<p class="definition">Definition at line <a class="el" href="SensorIMU_8py_source.html#l00121">121</a> of file <a class="el" href="SensorIMU_8py_source.html">SensorIMU.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keyword">def </span><a class="code" href="namespaceSensorIMU.html#ac646165254a4488e080794bdfe6a97be">callback_calibration_imu_status</a>(self, req):</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        self.stop_request = <span class="keyword">True</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        time.sleep(1 / self.frequency)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        calibration_status, status = self.bno055.get_calibration_status()</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        self.stop_request = <span class="keyword">False</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        result = TriggerResponse()</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordflow">if</span> status == RESPONSE_OK:</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            sys = <span class="stringliteral">&quot; [System: &quot;</span> + str(calibration_status[0]) + <span class="stringliteral">&quot;]&quot;</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            gyr = <span class="stringliteral">&quot; [Gyroscope: &quot;</span> + str(calibration_status[1]) + <span class="stringliteral">&quot;]&quot;</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            acc = <span class="stringliteral">&quot; [Accelerometer: &quot;</span> + str(calibration_status[2]) + <span class="stringliteral">&quot;]&quot;</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            mag = <span class="stringliteral">&quot; [Magnetometer: &quot;</span> + str(calibration_status[3]) + <span class="stringliteral">&quot;]&quot;</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            result.message = sys + gyr + acc + mag</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            result.success = <span class="keyword">True</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            rospy.logwarn(<span class="stringliteral">&quot;Unable to read IMU calibration&quot;</span>)</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            result.message = <span class="stringliteral">&quot;Unable to read IMU calibration&quot;</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            result.success = <span class="keyword">False</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">return</span> result</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a68d1aa2218826b73a9bc8a069306ecda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68d1aa2218826b73a9bc8a069306ecda">&#9670;&nbsp;</a></span>convert_angle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def SensorIMU.convert_angle </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>angle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts an angle to a value within 0 to 360 degrees. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">angle</td><td>Input angle in degrees </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">float</td><td>Converted angle within 0 to 360 degrees </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="SensorIMU_8py_source.html#l00208">208</a> of file <a class="el" href="SensorIMU_8py_source.html">SensorIMU.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keyword">def </span><a class="code" href="namespaceSensorIMU.html#a68d1aa2218826b73a9bc8a069306ecda">convert_angle</a>(self, angle):</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">return</span> (angle + 360) % 360</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8a55cf37a92cae87cfc81035d5457217"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a55cf37a92cae87cfc81035d5457217">&#9670;&nbsp;</a></span>get_imu_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def SensorIMU.get_imu_message </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates the ROS IMU message with the updated sensor data. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Imu</td><td>Updated IMU message ready for publishing </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="SensorIMU_8py_source.html#l00229">229</a> of file <a class="el" href="SensorIMU_8py_source.html">SensorIMU.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keyword">def </span><a class="code" href="namespaceSensorIMU.html#a8a55cf37a92cae87cfc81035d5457217">get_imu_message</a>(self):</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">if</span> self.should_update_imu():</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            self.update_imu()</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        quaternion = self.imu.get_quaternion_orientation()</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        linear_acceleration = self.imu.get_linear_acceleration()</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        gyroscope = self.imu.get_gyroscope()</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="comment"># Reuse the imu_msg attribute</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        self.imu_msg.header.frame_id = self.frame_id</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="comment"># self.imu_msg.header.stamp = rospy.get_time()</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        self.imu_msg.orientation.x, self.imu_msg.orientation.y, self.imu_msg.orientation.z, self.imu_msg.orientation.w = quaternion</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        self.imu_msg.linear_acceleration.x, self.imu_msg.linear_acceleration.y, self.imu_msg.linear_acceleration.z = linear_acceleration</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        self.imu_msg.angular_velocity.x, self.imu_msg.angular_velocity.y, self.imu_msg.angular_velocity.z = gyroscope</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="comment"># Set covariance values to -1</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        self.imu_msg.orientation_covariance[0] = -1</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        self.imu_msg.linear_acceleration_covariance[0] = -1</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        self.imu_msg.angular_velocity_covariance[0] = -1</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">return</span> self.imu_msg</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad2d76801911d3819023dd447ae74edb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2d76801911d3819023dd447ae74edb2">&#9670;&nbsp;</a></span>get_pitch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def SensorIMU.get_pitch </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches the current relative pitch value. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">tuple</td><td>Relative pitch in radians and degrees </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="SensorIMU_8py_source.html#l00260">260</a> of file <a class="el" href="SensorIMU_8py_source.html">SensorIMU.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keyword">def </span><a class="code" href="namespaceSensorIMU.html#ad2d76801911d3819023dd447ae74edb2">get_pitch</a>(self):</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">if</span> self.should_update_imu():</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            self.update_imu()</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">return</span> self.relative_pitch, self.convert_angle(math.degrees(self.relative_pitch))</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad86c8e5eb2b6641a5f21eebe7e65f032"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad86c8e5eb2b6641a5f21eebe7e65f032">&#9670;&nbsp;</a></span>get_roll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def SensorIMU.get_roll </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches the current relative roll value. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">tuple</td><td>Relative roll in radians and degrees </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="SensorIMU_8py_source.html#l00266">266</a> of file <a class="el" href="SensorIMU_8py_source.html">SensorIMU.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keyword">def </span><a class="code" href="namespaceSensorIMU.html#ad86c8e5eb2b6641a5f21eebe7e65f032">get_roll</a>(self):</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">if</span> self.should_update_imu():</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            self.update_imu()</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">return</span> self.relative_roll, self.convert_angle(math.degrees(self.relative_roll))</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="aca91a368da1c02a2cadc7a319d27e0b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca91a368da1c02a2cadc7a319d27e0b3">&#9670;&nbsp;</a></span>get_yaw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def SensorIMU.get_yaw </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches the current relative yaw value. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">tuple</td><td>Relative yaw in radians and degrees </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="SensorIMU_8py_source.html#l00254">254</a> of file <a class="el" href="SensorIMU_8py_source.html">SensorIMU.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keyword">def </span><a class="code" href="namespaceSensorIMU.html#aca91a368da1c02a2cadc7a319d27e0b3">get_yaw</a>(self):</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">if</span> self.should_update_imu():</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            self.update_imu()</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">return</span> self.relative_yaw, self.convert_angle(math.degrees(self.relative_yaw))</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8afda9eebe2c2ccf6af1b85a4f02f027"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8afda9eebe2c2ccf6af1b85a4f02f027">&#9670;&nbsp;</a></span>load_calibration_from_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def SensorIMU.load_calibration_from_file </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads IMU calibration data from a file. </p>
<p>Attempts to load calibration data from a binary file, and if successful, loads the data into the IMU. If the file is not found or data loading fails, the IMU will use the default calibration.</p>
<dl class="section return"><dt>Returns</dt><dd>int Status code indicating success or failure of loading calibration. </dd></dl>

<p class="definition">Definition at line <a class="el" href="SensorIMU_8py_source.html#l00154">154</a> of file <a class="el" href="SensorIMU_8py_source.html">SensorIMU.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keyword">def </span><a class="code" href="namespaceSensorIMU.html#a8afda9eebe2c2ccf6af1b85a4f02f027">load_calibration_from_file</a>(self):</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        status = -1</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        dir_path = os.path.dirname(os.path.realpath(__file__))</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            binary_file = open(str(dir_path) + <span class="stringliteral">&quot;/&quot;</span> + self.operation_mode_str + <span class="stringliteral">&quot;_calibration&quot;</span>, <span class="stringliteral">&quot;rb&quot;</span>)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            calibration_data = binary_file.read()</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            binary_file.close()</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            calibration_exists = <span class="keyword">True</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">except</span>:</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            calibration_data = 0</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            calibration_exists = <span class="keyword">False</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">if</span> calibration_exists:</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            status = self.bno055.set_calibration(calibration_data)</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            status = RESPONSE_ERROR</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">return</span> status</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6183b46a5e8a468bfea15d53920f42e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6183b46a5e8a468bfea15d53920f42e9">&#9670;&nbsp;</a></span>set_imu_configuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def SensorIMU.set_imu_configuration </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the IMU with the necessary settings and modes. </p>
<p>This method performs the following steps:</p><ul>
<li>Enables IMU configuration mode.</li>
<li>Sets IMU units such as acceleration, angular velocity, orientation, and temperature.</li>
<li>Sets the IMU axis configuration.</li>
<li>Loads calibration data from a file if available.</li>
<li>Configures the IMU oscillator type.</li>
<li>Sets the IMU to operation mode to begin normal functionality.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

<p class="definition">Definition at line <a class="el" href="SensorIMU_8py_source.html#l00068">68</a> of file <a class="el" href="SensorIMU_8py_source.html">SensorIMU.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">def </span><a class="code" href="namespaceSensorIMU.html#a6183b46a5e8a468bfea15d53920f42e9">set_imu_configuration</a>(self):</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        status_1 = self.bno055.enable_imu_configuration()</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">if</span> status_1 != RESPONSE_OK:</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            rospy.logerr(<span class="stringliteral">&quot;Unable to activate configuration mode&quot;</span>)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        status_2 = self.bno055.set_imu_units(</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            acceleration_units=METERS_PER_SECOND,</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            angular_velocity_units=RAD_PER_SECOND,</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            euler_orientation_units=RAD,</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            temperature_units=CELSIUS,</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            orientation_mode=WINDOWS_ORIENTATION</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        )</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">if</span> status_2 != RESPONSE_OK:</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            rospy.logwarn(<span class="stringliteral">&quot;Unable to configure units&quot;</span>)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        status_3 = self.bno055.set_imu_axis(axis_placement=P1)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">if</span> status_3 != RESPONSE_OK:</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            rospy.logwarn(<span class="stringliteral">&quot;Unable to configure axis&quot;</span>)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        status_calibration = self.load_calibration_from_file()</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordflow">if</span> status_calibration != RESPONSE_OK:</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            rospy.loginfo(<span class="stringliteral">&quot;Calibration not detected. IMU will use default calibration&quot;</span>)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        status_oscillator = self.bno055.set_oscillator(oscillator_type=self.oscillator)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">if</span> status_oscillator != RESPONSE_OK:</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            rospy.loginfo(<span class="stringliteral">&quot;Unable to configure oscillator&quot;</span>)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        status_4 = self.bno055.set_imu_operation_mode(operation_mode=self.operation_mode)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">if</span> status_4 != RESPONSE_OK:</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            rospy.logerr(<span class="stringliteral">&quot;Unable to configure operation mode&quot;</span>)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">if</span> (status_1 == RESPONSE_OK <span class="keywordflow">and</span> status_2 == RESPONSE_OK </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keywordflow">and</span> status_3 == RESPONSE_OK <span class="keywordflow">and</span> status_4 == RESPONSE_OK):</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            rospy.loginfo(<span class="stringliteral">&quot;IMU is working now in %s mode!&quot;</span>, self.operation_mode_str)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            rospy.logwarn(<span class="stringliteral">&quot;The IMU was not configured correctly. It may not work&quot;</span>)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a190abb72cde71851da8b653f226aa53e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a190abb72cde71851da8b653f226aa53e">&#9670;&nbsp;</a></span>should_update_imu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def SensorIMU.should_update_imu </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines if the IMU data needs to be updated based on a fixed update frequency. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if the IMU should update, False otherwise </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="SensorIMU_8py_source.html#l00178">178</a> of file <a class="el" href="SensorIMU_8py_source.html">SensorIMU.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keyword">def </span><a class="code" href="namespaceSensorIMU.html#a190abb72cde71851da8b653f226aa53e">should_update_imu</a>(self):</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        current_time = time.time()</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">if</span> current_time - self.last_update_time &gt;= 0.025:</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            self.last_update_time = current_time</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a307dbf14302c485743b61573e5a60987"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a307dbf14302c485743b61573e5a60987">&#9670;&nbsp;</a></span>update_angles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def SensorIMU.update_angles </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the yaw, pitch, and roll angles of the IMU sensor. </p>

<p class="definition">Definition at line <a class="el" href="SensorIMU_8py_source.html#l00186">186</a> of file <a class="el" href="SensorIMU_8py_source.html">SensorIMU.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keyword">def </span><a class="code" href="namespaceSensorIMU.html#a307dbf14302c485743b61573e5a60987">update_angles</a>(self):</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        quaternion = self.imu.get_quaternion_orientation()</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        current_yaw, current_pitch, current_roll = self.calculate_yaw_pitch_roll(quaternion)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.initialized:</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            self.initial_yaw = current_yaw</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            self.initial_pitch = current_pitch</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            self.initial_roll = current_roll</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            self.initialized = <span class="keyword">True</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        self.relative_yaw = current_yaw - self.initial_yaw</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        self.relative_pitch = current_pitch - self.initial_pitch</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        self.relative_roll = current_roll - self.initial_roll</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1d9a641ac9a33e4f470bef07ccbb7838"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d9a641ac9a33e4f470bef07ccbb7838">&#9670;&nbsp;</a></span>update_imu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def SensorIMU.update_imu </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches updated IMU data from the sensor. </p>

<p class="definition">Definition at line <a class="el" href="SensorIMU_8py_source.html#l00201">201</a> of file <a class="el" href="SensorIMU_8py_source.html">SensorIMU.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keyword">def </span><a class="code" href="namespaceSensorIMU.html#a1d9a641ac9a33e4f470bef07ccbb7838">update_imu</a>(self):</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        self.imu.update_imu_data()</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        self.update_angles()</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<div class="ttc" id="anamespaceSensorIMU_html_ad86c8e5eb2b6641a5f21eebe7e65f032"><div class="ttname"><a href="namespaceSensorIMU.html#ad86c8e5eb2b6641a5f21eebe7e65f032">SensorIMU.get_roll</a></div><div class="ttdeci">def get_roll(self)</div><div class="ttdoc">Fetches the current relative roll value.</div><div class="ttdef"><b>Definition:</b> <a href="SensorIMU_8py_source.html#l00266">SensorIMU.py:266</a></div></div>
<div class="ttc" id="anamespaceSensorIMU_html_a6183b46a5e8a468bfea15d53920f42e9"><div class="ttname"><a href="namespaceSensorIMU.html#a6183b46a5e8a468bfea15d53920f42e9">SensorIMU.set_imu_configuration</a></div><div class="ttdeci">def set_imu_configuration(self)</div><div class="ttdoc">Configures the IMU with the necessary settings and modes.</div><div class="ttdef"><b>Definition:</b> <a href="SensorIMU_8py_source.html#l00068">SensorIMU.py:68</a></div></div>
<div class="ttc" id="anamespaceSensorIMU_html_a8afda9eebe2c2ccf6af1b85a4f02f027"><div class="ttname"><a href="namespaceSensorIMU.html#a8afda9eebe2c2ccf6af1b85a4f02f027">SensorIMU.load_calibration_from_file</a></div><div class="ttdeci">def load_calibration_from_file(self)</div><div class="ttdoc">Loads IMU calibration data from a file.</div><div class="ttdef"><b>Definition:</b> <a href="SensorIMU_8py_source.html#l00154">SensorIMU.py:154</a></div></div>
<div class="ttc" id="anamespaceSensorIMU_html_a8a55cf37a92cae87cfc81035d5457217"><div class="ttname"><a href="namespaceSensorIMU.html#a8a55cf37a92cae87cfc81035d5457217">SensorIMU.get_imu_message</a></div><div class="ttdeci">def get_imu_message(self)</div><div class="ttdoc">Generates the ROS IMU message with the updated sensor data.</div><div class="ttdef"><b>Definition:</b> <a href="SensorIMU_8py_source.html#l00229">SensorIMU.py:229</a></div></div>
<div class="ttc" id="anamespaceSensorIMU_html_a6734f909b586db86c1b2c7c04ba3ddb3"><div class="ttname"><a href="namespaceSensorIMU.html#a6734f909b586db86c1b2c7c04ba3ddb3">SensorIMU.calculate_yaw_pitch_roll</a></div><div class="ttdeci">def calculate_yaw_pitch_roll(self, quaternion)</div><div class="ttdoc">Calculates yaw, pitch, and roll from quaternion data.</div><div class="ttdef"><b>Definition:</b> <a href="SensorIMU_8py_source.html#l00214">SensorIMU.py:214</a></div></div>
<div class="ttc" id="anamespaceSensorIMU_html_a68d1aa2218826b73a9bc8a069306ecda"><div class="ttname"><a href="namespaceSensorIMU.html#a68d1aa2218826b73a9bc8a069306ecda">SensorIMU.convert_angle</a></div><div class="ttdeci">def convert_angle(self, angle)</div><div class="ttdoc">Converts an angle to a value within 0 to 360 degrees.</div><div class="ttdef"><b>Definition:</b> <a href="SensorIMU_8py_source.html#l00208">SensorIMU.py:208</a></div></div>
<div class="ttc" id="anamespaceSensorIMU_html_ac646165254a4488e080794bdfe6a97be"><div class="ttname"><a href="namespaceSensorIMU.html#ac646165254a4488e080794bdfe6a97be">SensorIMU.callback_calibration_imu_status</a></div><div class="ttdeci">def callback_calibration_imu_status(self, req)</div><div class="ttdoc">Callback function to check the IMU calibration status.</div><div class="ttdef"><b>Definition:</b> <a href="SensorIMU_8py_source.html#l00121">SensorIMU.py:121</a></div></div>
<div class="ttc" id="anamespaceSensorIMU_html_aca91a368da1c02a2cadc7a319d27e0b3"><div class="ttname"><a href="namespaceSensorIMU.html#aca91a368da1c02a2cadc7a319d27e0b3">SensorIMU.get_yaw</a></div><div class="ttdeci">def get_yaw(self)</div><div class="ttdoc">Fetches the current relative yaw value.</div><div class="ttdef"><b>Definition:</b> <a href="SensorIMU_8py_source.html#l00254">SensorIMU.py:254</a></div></div>
<div class="ttc" id="anamespaceSensorIMU_html_a1d9a641ac9a33e4f470bef07ccbb7838"><div class="ttname"><a href="namespaceSensorIMU.html#a1d9a641ac9a33e4f470bef07ccbb7838">SensorIMU.update_imu</a></div><div class="ttdeci">def update_imu(self)</div><div class="ttdoc">Fetches updated IMU data from the sensor.</div><div class="ttdef"><b>Definition:</b> <a href="SensorIMU_8py_source.html#l00201">SensorIMU.py:201</a></div></div>
<div class="ttc" id="anamespaceSensorIMU_html_a307dbf14302c485743b61573e5a60987"><div class="ttname"><a href="namespaceSensorIMU.html#a307dbf14302c485743b61573e5a60987">SensorIMU.update_angles</a></div><div class="ttdeci">def update_angles(self)</div><div class="ttdoc">Updates the yaw, pitch, and roll angles of the IMU sensor.</div><div class="ttdef"><b>Definition:</b> <a href="SensorIMU_8py_source.html#l00186">SensorIMU.py:186</a></div></div>
<div class="ttc" id="anamespaceSensorIMU_html_a190abb72cde71851da8b653f226aa53e"><div class="ttname"><a href="namespaceSensorIMU.html#a190abb72cde71851da8b653f226aa53e">SensorIMU.should_update_imu</a></div><div class="ttdeci">def should_update_imu(self)</div><div class="ttdoc">Determines if the IMU data needs to be updated based on a fixed update frequency.</div><div class="ttdef"><b>Definition:</b> <a href="SensorIMU_8py_source.html#l00178">SensorIMU.py:178</a></div></div>
<div class="ttc" id="anamespaceSensorIMU_html_ad2d76801911d3819023dd447ae74edb2"><div class="ttname"><a href="namespaceSensorIMU.html#ad2d76801911d3819023dd447ae74edb2">SensorIMU.get_pitch</a></div><div class="ttdeci">def get_pitch(self)</div><div class="ttdoc">Fetches the current relative pitch value.</div><div class="ttdef"><b>Definition:</b> <a href="SensorIMU_8py_source.html#l00260">SensorIMU.py:260</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
